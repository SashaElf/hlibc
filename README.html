<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
</pre><dt><strong>hlibc</strong></dt><pre>

</pre><dt><strong>DESCRIPTION:</strong></dt><pre>
</pre><hr><pre>

	hlibc is an experimental libc targeted at the linux kernel's syscall
	ABI. It is a standalone libc which supports the i386, x86_64 and arm 
	architectures. hlibc can be compiled with either gcc or the llvm
	clang compiler.

	hlibc has experimental ports for mips and aarch64.


</pre><dt><strong>BUILDING:</strong></dt><pre>
</pre><hr><pre>

	hlibc contains a shell wrapper for gcc called `gcc-wrap`. This allows it 
	to be easily installed and used from your home directory without the 
	need for root privilege.

		git clone <a href="https://git.hlibc.xyz/lab/hlibc">https://git.hlibc.xyz/lab/hlibc</a>
		cd hlibc 
		./configure --prefix=/home/$USER/buildarea 
		make 
		make install

	Test the installation:

		/home/$USER/buildarea/bin/gcc-wrap hello.c



	hlibc only supports static linking at this time.



	<a href="hbox/">hbox/</a>
		A small busybox like set of POSIX utilities.

	<a href="tests/">tests/</a>
		A set of C run time tests.


</pre><dt><strong>AUTOMATIC TESTING:</strong></dt><pre>
</pre><hr><pre>
	
	Use the following instructions to retrieve, build and run hlibc 
	and the hlibc test suite.

		git clone <a href="https://git.zv.io/r/hlibc.git">https://git.zv.io/r/hlibc.git</a>
		cd hlibc
		make gcctest

	If all ran successfully there should be no significant errors and
	a confirmation notice containing the results of the test suite 
	will be printed to screen looking something like this:

		==========COMPILING TESTS ===================================
		=============================================================
		==========TEST RESULT START==================================
		`atoll-small' compared equal to its control method
		`strtoll-driver' compared equal to its control method
		`malloc-huge' compared equal to its control method
		`ctype' compared equal to its control method
		`malloc-unique-pointer' compared equal to its control method
		`getline-driver' compared equal to its control method
		`atoi' compared equal to its control method
		 ...

	If any compiler or linker errors occur within this report then the libc
	has changed and likely regressed or otherwise lost a functionality.

	If you wish to add a new test to the test suite simply put the program
	under tests/ and it will be compiled along with the other tests. To
	have the test automatically ran with the hlibc testsuite then add the
	title of its binary to BASIC_TYPE= at the top of tools/build.sh. This
	method is for tests that produce output as stdout and are then compared
	with the output of the same test compiled against the host. If the test
	does not use stdout or is unsuitable for running against the host as a
	control medium then it must be scripted into ./tools/build.sh by hand.

	Two duplicate test directories are created with the test suite, These
	duplicate test directories are compiled against the default host libc
	and used as control mediums to diff the output of the same tests
	compiled against hlibc:

		control/*.c (links to tests/*.c)
		hbox-control/*.c (links to hbox/*.c/)


</pre><dt><strong>USING LLVM/CLANG:</strong></dt><pre>
</pre><hr><pre>

	Clang does work with hlibc. However, the wrapper script is still
	experimental. It can be automatically tested by running;

		make clangtest


</pre><dt><strong>ROADMAP:</strong></dt><pre>
</pre><hr><pre>

	Add random() so that the arbsh/arbprec library can be built using hlibc.

	Write more tests in C, add them to tests/ and tools/build.sh.

	Add an fdopen() function and redesign popen() to use it. 

	Redesign the syscall interface to use unique code and start removing the
	remnants of musllibc/.

	Rewrite getopt(), This getopt version was written by Henry Spencer and
	is not unique to hlibc.

	Address proper switching between unbuffered, line buffered and buffered
	modes inside of __fillbuf.c and __flushbuf.c. Register them before main
	and then with the internal exit() function.

	Fix the experimental MIPS port. Popen and stat are not working 
	correctly.

	Finish the aarch64 port.

	Write tempnam and mktemp for stdio.
	

</pre><dt><strong>REVISION CONTROL:</strong></dt><pre>
</pre><hr><pre>

	<a href="https://git.hlibc.xyz/lab/hlibc">https://git.hlibc.xyz/lab/hlibc</a>


</pre><dt><strong>WEB HOME:</strong></dt><pre>
</pre><hr><pre>

	hlibc is in the process of redesigning our web home. In the meantime,
	this will be its location, and releases can be retrieved from there:

	<a href="http:<a href="//hlibc.xyz/">//hlibc.xyz/</a>">http:<a href="//hlibc.xyz/">//hlibc.xyz/</a></a>


</pre><dt><strong>CONTACT:</strong></dt><pre>
</pre><hr><pre>

	<a href="mailto:cm0graff@gmail.com">cm0graff@gmail.com</a>


</pre><dt><strong>IRC:</strong></dt><pre>
</pre><hr><pre>

	#hlibc on irc.freenode.net


</pre><dt><strong>RELENG:</strong></dt><pre>
</pre><hr><pre>

	A release can be engineered by running:

		make release RELENG="hlibc-0.1x" \
		RELENG_MIR="<a href="http://mirror/" \">http://mirror/" \</a>
		RELENG_DIR="public_html/" \
		RELENG_SSH="<a href="mailto:user@host:www"">user@host:www"</a>


</pre><dt><strong>DEVELOPERS:</strong></dt><pre>
</pre><hr><pre>

	One of the simplest ways to contribute to hlibc is to make patches
	using `git'. They can be constructed as follows:

		git add src/path/to/work.c
		git commit -m "something new added"
		git format-patch -1 --stdout > work.patch


</pre><dt><strong>REFERENCES:</strong></dt><pre>
</pre><hr><pre>

	<a href="https://www.corsix.org/content/converting-floats-to-strings-part-1">https://www.corsix.org/content/converting-floats-to-strings-part-1</a>

	<a href="https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html">https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html</a>

	<a href="https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options">https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options</a>

	<a href="http://lolengine.net/blog/2011/12/21/better-function-approximations">http://lolengine.net/blog/2011/12/21/better-function-approximations</a>
    
	<a href="http://lolengine.net/blog/2011/9/17/playing-with-the-cpu-pipeline">http://lolengine.net/blog/2011/9/17/playing-with-the-cpu-pipeline</a>

	Russ Cox does really nice research on regular expressions:
	<a href="https://swtch.com/~rsc/regexp/regexp1.html">https://swtch.com/~rsc/regexp/regexp1.html</a>


</pre><dt><strong>RELEASES:</strong></dt><pre>
</pre><hr><pre>

	<a href="http://hlibc.xyz/hlibc-0.1a.tar.gz">http://hlibc.xyz/hlibc-0.1a.tar.gz</a>

	<a href="http://hlibc.xyz/hlibc-0.1b.tar.gz">http://hlibc.xyz/hlibc-0.1b.tar.gz</a>

	<a href="http://hlibc.xyz/hlibc-0.1c.tar.gz">http://hlibc.xyz/hlibc-0.1c.tar.gz</a>

	<a href="http://hlibc.xyz/hlibc-0.1d.tar.gz">http://hlibc.xyz/hlibc-0.1d.tar.gz</a>
</pre>
